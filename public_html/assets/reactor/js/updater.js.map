{"version":3,"sources":["updater.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"updater.js","sourcesContent":[";(function (window) {\r\n    'use strict';\r\n\r\n    // Uploader Constructor\r\n    function Updater() {\r\n        this._init();\r\n    }\r\n\r\n    // Updater\r\n    Updater.prototype = {\r\n        _init: function () {\r\n            this.el = $('#updateIndicator');\r\n            this.progressBar = $('#updateProgress');\r\n            this.progressMessage = $('#updateMessage');\r\n\r\n            this.starturl = this.el.data('starturl');\r\n            this.completeurl = this.el.data('completeurl');\r\n\r\n            this._start();\r\n        },\r\n        _start: function () {\r\n            this._request(this.starturl);\r\n        },\r\n        _next: function (data) {\r\n            this.progressMessage.text(data.message);\r\n\r\n            if (data.next) {\r\n                this._request(data.next);\r\n            } else {\r\n                this._complete();\r\n            }\r\n        },\r\n        _request: function (requestURL) {\r\n            var self = this;\r\n\r\n            $.post(requestURL, function (response) {\r\n                self._setProgress(response.progress);\r\n\r\n                self._next(response);\r\n            });\r\n        },\r\n        _setProgress: function (percent) {\r\n            this.progressBar.width(percent.toString() + \"%\");\r\n        },\r\n        _complete: function () {\r\n            window.location = this.completeurl;\r\n        }\r\n    };\r\n\r\n    // Register updater to the window namespace\r\n    window.Updater = Updater;\r\n\r\n})(window);\r\n\r\nvar updater = new Updater();"],"sourceRoot":"/source/"}